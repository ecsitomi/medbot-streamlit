ğŸ§¾ PRD â€“ KontextusÃ©rzÃ©keny kÃ©rdÃ©sgenerÃ¡lÃ¡s fejlesztÃ©se (Medical Chatbot)
ğŸ§  1. CÃ©l
A chatbot tÃ¶bbkÃ¶rÃ¶s, kontextusÃ©rzÃ©keny anamnÃ©zisinterjÃºt tudjon lefolytatni, amely a meglÃ©vÅ‘ struktÃºrÃ¡ban marad, de:

- cÃ©lzottabb kÃ©rdÃ©seket tesz fel tÃ¼netÃ¶sszefÃ¼ggÃ©sek alapjÃ¡n,

- kÃ©pes egyszerÅ± vÃ¡laszokat pontosan Ã©rtelmezni (pl. â€34â€ â†’ age = 34),

- rugalmasan kezeli a felhasznÃ¡lÃ³i stÃ­lusokat,

- egysÃ©gesÃ­ti Ã©s kÃ¶zpontosÃ­tja a GPT promptgenerÃ¡lÃ¡st.

ğŸ” 2. ProblÃ©mÃ¡k jelenleg
A chatbot sablonos promptok alapjÃ¡n kÃ©rdez, mindig csak a kÃ¶vetkezÅ‘ mezÅ‘re fÃ³kuszÃ¡l.

Nem veszi figyelembe a meglÃ©vÅ‘ tÃ¼netekbÅ‘l levonhatÃ³ kÃ¶vetkeztetÃ©seket.

EgyszerÅ± vÃ¡laszokat (pl. csak szÃ¡m) csak explicit kulcsszavakkal ismer fel.

A GPT prompt-Ã¶sszeÃ¡llÃ­tÃ¡s szÃ©tszÃ³rva, nehezen bÅ‘vÃ­thetÅ‘.

ğŸ§© 3. FunkciÃ³k

Modul   >>    FunkciÃ³   >>  LeÃ­rÃ¡s

symptom_graph.py   >>    TÃ¼netkapcsolati szabÃ¡lymotor   >>    ElÅ‘re definiÃ¡lt tÃ¼netkombinÃ¡ciÃ³k alapjÃ¡n extra kÃ©rdÃ©seket javasol

prompt_builder.py   >>    Intelligens GPT promptgenerÃ¡lÃ¡s   >>    Kontextus, hangnem, nyelv alapjÃ¡n egysÃ©ges kÃ©rdÃ©s prompt Ã©pÃ­tÃ©se

manual_extract_info() bÅ‘vÃ­tÃ©se   >>    Rugalmas vÃ¡laszÃ©rtelmezÃ©s   >>    SzÃ¡m vagy szimpla szÃ³ alapjÃ¡n (pl. â€fÃ©rfiâ€) is felismeri a mezÅ‘t

get_next_question_gpt() kiegÃ©szÃ­tÃ©se   >>    Reasoning-kÃ©rdÃ©s elsÅ‘bbsÃ©g   >>    ElÅ‘szÃ¶r a symptom_graph kÃ©rdÃ©seit teszi fel, utÃ¡na hiÃ¡nyzÃ³ mezÅ‘re fÃ³kuszÃ¡l

ğŸ“„ 4. ElfogadÃ¡si kritÃ©riumok

FunkciÃ³   >>    KritÃ©rium

TÃ¼neti reasoning mÅ±kÃ¶dik   >>    Ha â€lÃ¡zâ€ Ã©s â€fÃ¡radtsÃ¡gâ€ szerepel, felteszi az alvÃ¡sminÅ‘sÃ©gre vagy lÃ¡zmÃ©rÃ©sre vonatkozÃ³ kÃ©rdÃ©st

GPT kÃ©rdÃ©s sablonosodik   >>    Minden GPT kÃ©rdÃ©s a prompt_builder.py-bÅ‘l jÃ¶n, nem duplikÃ¡lt
Szimpla vÃ¡laszok felismerÃ©se   >>    â€34â€ â†’ age = 34, â€fÃ©rfiâ€ â†’ gender = fÃ©rfi, â€2 napjaâ€ â†’ duration = 2 nap

Kontextus figyelembevÃ©tel   >>    A kÃ¶vetkezÅ‘ kÃ©rdÃ©s figyelembe veszi a mÃ¡r Ã¶sszegyÅ±jtÃ¶tt adatokat Ã©s tÃ¼neteket

ğŸ§° 5. ModulrÃ©szletek
symptom_graph.py

SYMPTOM_DEPENDENCIES = {
    ("lÃ¡z", "fÃ¡radtsÃ¡g"): ["Milyen magas volt legutÃ³bb a lÃ¡za?", "JÃ³l tudott aludni az Ã©jjel?"],
    ("torokfÃ¡jÃ¡s", "lÃ¡z"): ["NehezÃ©re esik a nyelÃ©s?", "Van-e kÃ¶hÃ¶gÃ©se is?"]
}

def get_suggested_followup_questions(symptoms: list) -> list:
    # Visszaadja a kapcsolÃ³dÃ³ kÃ©rdÃ©seket, ha tÃ¼netkombinÃ¡ciÃ³ egyezik

###

prompt_builder.py

def build_next_question_prompt(missing_field: str, tone="friendly", language="hu") -> dict:
    # Ã–sszeÃ¡llÃ­tja a GPT szÃ¡mÃ¡ra a system + user promptokat a kontextus alapjÃ¡n
manual_extract_info() (kiterjesztÃ©s)
Regex segÃ­tsÃ©gÃ©vel az â€Ã©letkorâ€, â€nemâ€, â€idÅ‘tartamâ€, â€sÃºlyossÃ¡gâ€ mezÅ‘k rugalmas felismerÃ©se

PÃ©lda: re.search(r"\b(\d{1,2})\b", input) â†’ age

ğŸ”— 6. ArchitektÃºrÃ¡ban valÃ³ elhelyezÃ©s

logic/
â”œâ”€â”€ gpt_communication.py      â†’ hasznosÃ­tja a prompt_builder modult
â”œâ”€â”€ symptom_graph.py          â†’ Ãºj modul, opcionÃ¡lis follow-up kÃ©rdÃ©sekkel
â”œâ”€â”€ chat_processor.py         â†’ elÅ‘szÃ¶r megkÃ©rdezi a symptom_graph javaslatait
â”œâ”€â”€ data_extraction.py        â†’ bÅ‘vÃ­tett manual extract


